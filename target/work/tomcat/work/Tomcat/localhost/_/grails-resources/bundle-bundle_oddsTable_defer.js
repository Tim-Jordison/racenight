// Generated by CoffeeScript 1.9.3
(function() {
  window.RACENIGHT = window.RACENIGHT || {};

  RACENIGHT.getDisplayableOddsTable = function() {
    return $.ajax({
      url: "/race/getOddsAndPayout?dateTAG=" + new Date().getTime(),
      data: {
        id: window.raceId,
        previousBetCount: window.previousBetCount,
        firstCall: window.firstCall
      },
      error: function(jqXHR, textStatus, errorThrown) {
        return console.log('ajax error');
      },
      success: function(data) {
        if (data.html) {
          $(".odds-table").html(data.html);
          return window.firstCall = false;
        }
      }
    });
  };

  $(document).ready(function() {
    window.previousBetCount = 0;
    window.firstCall = true;
    RACENIGHT.getDisplayableOddsTable();
    return setInterval(function() {
      return RACENIGHT.getDisplayableOddsTable();
    }, window.updateInterval);
  });

}).call(this);


